<view class="container">
  <!-- 下拉刷新 -->
  <view wx:if="{{ isRefreshing }}" class="weui-loadmore">
    <view class="weui-loading"></view>
    <!-- <view class='weui-loadmore-tips'>加载中...</view> -->
  </view>
  <view class="header" style="background-image: linear-gradient(-90deg, #{{ detail.color[0] }} 0%, #{{ detail.color[1] }} 100%);">
    <view class="left">
      <image mode="aspectFill" class="img" src="{{ circle.image }}"></image>
      <view class="text">
        <text class="name line">{{ circle.title }}</text>
        <navigator class="member" url="../member/member?id={{ circle.id }}&name={{ circle.title }}" hover-class="none" open-type="navigate">
          {{ circle.members }}名成员
          <image mode="aspectFill" class="icon" src="{{ $state.imgHost }}/Return.png"></image>
        </navigator>
      </view>
    </view>
    <view class="join joined" wx:if="{{ circle.joined == 1 }}">已加入</view>
    <view class="join" wx:else bindtap="join">+加入</view>
  </view>
  <view class="wrap">
    <view wx:for="{{ list }}" wx:key="index" class="item">
      <view class="top">
        <view class="left">
          <image mode="aspectFill" class="avatarUrl" src="{{ item.avatar }}" data-uid="{{ item.uid }}" catchtap="toUser"></image>
          <view class="text">
            <text class="nickName line">{{ item.nickname }}</text>
            <text wx:if="{{ item.university_name }}" class="school line">{{ item.university_name }}</text>
          </view>
        </view>
        <text class="date">{{ item.createtimes }}</text>
      </view>
      <view bindtap="navigate" data-id="{{ item.id }}">
        <rich-text wx:if="{{ item.content }}" class="name" nodes="{{ item.content }}"></rich-text>
        <view class="content" wx:if="{{ item.images.length > 0 }}">
          <view class="img one" wx:if="{{ item.images.length == 1 }}">
            <image mode="widthFix" wx:for="{{ item.images }}" wx:for-item="items" wx:key="index" src="{{ items }}" data-urls="{{ item.images }}" data-current="{{ items }}" bindtap="previewImage"></image>
          </view>
          <view class="img three" wx:else>
            <image mode="aspectFill" wx:for="{{ item.images }}" wx:for-item="items" wx:key="index" src="{{ items }}" data-urls="{{ item.images }}" data-current="{{ items }}" bindtap="previewImage"></image>
          </view>
        </view>
        <view class="content" wx:if="{{ item.url }}">
          <view class="bg">
            <image mode="aspectFill" src="{{ item.auditing ? $state.imgHost + '/tip.jpg' : item.image }}" class="poster"></image>
            <image mode="aspectFill" src="{{ $state.imgHost }}/play-hl.png" class="play"></image>
          </view>
        </view>
      </view>
      <view class="btn">
        <button class="share item" open-type="share" data-index="{{ index }}" hover-class="btn-hover">
          <icon class="iconfont icon-fenxiang"></icon>
          <text class="text">{{ item.fw || item.forward }}</text>
        </button>
        <text class="division"></text>
        <!-- 评论 -->
        <navigator url="../pDetail/pDetail?id={{ item.id }}&comment" hover-class="none" open-type="navigate" class="item">
          <icon class="iconfont icon-comment"></icon>
          <text class="text">{{ item.cw || item.comments }}</text>
        </navigator>
        <text class="division"></text>
        <!-- 点赞 -->
        <view class="item" bindtap="praise" data-index="{{ index }}">
          <view class="praise  {{ item.likestatus ? 'end' : '' }} {{ item.praising ? 'ani' : '' }}" data-index="{{ index }}" bindanimationend="aniend"></view>
          <text class="text">{{ item.lw || item.likes }} </text>
        </view>
      </view>
    </view>
  </view>
</view>
<view class="footer">
  <navigator url="../release/release" hover-class="none" open-type="navigate" class="write">
    <image mode="aspectFill" class="icon" src="{{ $state.imgHost }}/write.png"></image>
    <text class="text">写帖</text>
  </navigator>
</view>
