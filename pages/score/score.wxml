<!-- 下拉刷新 -->
<view wx:if="{{ isRefreshing }}" class="weui-loadmore indexdrop">
  <view class="weui-loading"></view>
</view>
<!-- 头部大背景 -->
<image class="bg" src="/images/score/score_bg.png">
  <text class="title">您的可用积分</text>
  <text class="scores">{{ totalPoints }}</text>
</image>
<!-- tabs菜单列表 -->
<view class="tabs" hover-stop-propagation="true" catchtouchmove="return">
  <view class="tab {{ currentTab == 1 ? 'active' : '' }}" data-index="1" catchtap="switchTap">
    <image class="icon" src="/images/score/score_source.png" mode="aspectFill"></image>
    <text class="dsc">积分获取</text>
    <text class="underline"></text>
  </view>
  <view class="divi_line"></view>
  <view class="tab {{ currentTab == 2 ? 'active' : '' }}" data-index="2" catchtap="switchTap">
    <image class="icon" src="/images/score/score_pay.png" mode="aspectFill"></image>
    <text class="dsc">积分兑换</text>
    <text class="underline"></text>
  </view>
  <view class="divi_line"> </view>
  <view class="tab {{ currentTab == 3 ? 'active' : '' }}" data-index="3" catchtap="switchTap">
    <image class="icon" src="/images/score/score_datails.png" mode="aspectFill"></image>
    <text class="dsc">积分明细</text>
    <text class="underline"></text>
  </view>
</view>
<!-- 滚动区域--单个列表详情 -->
<swiper class="swiper" current="{{ currentTab - 1 }}" bindchange="swiperChange">
  <swiper-item item-id="1">
    <scroll-view class="scroll_container" scroll-y="{{ scrollStatus }}">
      <view class="source_content">
        <view class="item" wx:for="{{ sources }}" wx:key="index">
          <text class="title">{{ item.title }}</text>
          <!-- prettier-ignore -->
          <text class="score"><text class="num">{{ item.score }}</text>积分</text>
          <!-- prettier-ignore -->
          <text wx:if="{{ item.times }}" class="times">每天还有<text class="num">{{ item.times }}</text>次机会</text>
          <button class="status {{ item.status ? 'finish' : '' }}" bindtap="nav" data-index="{{ index }}" disabled="{{ item.status }}">{{ item.status ? "已完成" : "立即领取" }}</button>
        </view>
      </view>
    </scroll-view>
  </swiper-item>
  <swiper-item item-id="2">
    <scroll-view class="scroll_container" scroll-y="{{ scrollStatus }}">
      <view class="pay_content">
        <view class="item" wx:for="{{ paylist }}" wx:key="index">
          <image class="bg" src="{{ item.image }}" mode="aspectFill" lazy-load="true"> </image>
          <text class="title">{{ item.title }}</text>
          <text class="score">{{ item.largePoint || item.need_points }}</text>
          <text class="unit">积分</text>
          <button class="bt {{ item.stock ? '' : 'out' }}" size="mini" data-stock="{{ item.stock }}" data-score="{{ item.need_points }}" data-id="{{ item.id }}" bindtap="gift">兑换</button>
        </view>
      </view>
    </scroll-view>
  </swiper-item>
  <swiper-item item-id="3">
    <scroll-view class="scroll_container" scroll-y="{{ scrollStatus }}" bindscrolltolower="lower">
      <view class="details_content">
        <view class="scroll_con">
          <view class="item" wx:for="{{ details }}" wx:key="index">
            <text class="title">{{ item.type_desc || item.title }}</text>
            <text class="time">{{ item.time }}</text>
            <text class="score {{ item.amount < 0 ? 'negative' : '' }} ">{{ (item.amount > 0 ? "+" : "") + item.amount }}</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </swiper-item>
</swiper>
