<!--
 * @Date: 2020-03-03 19:36:51
 * @LastEditors: hxz
 * @LastEditTime: 2020-03-03 19:38:31
 -->
<!--pages/vote/vote.wxml-->
<view class="vote">
    <view class="vote-header">
        <image class="vote-img" src="{{$state.imgHost}}/vote-bg.png" alt=""/>
        <view class="header-left">
            <image src="../../images/vote-talk.png" alt="" hidden="{{!newProduction.length}}" />
            <swiper autoplay interval="2000" vertical circular class="text">
                <swiper-item wx:for="{{newProduction}}" wx:key="index" class="swiper-item">
                    用户{{item.mobile}}发布了#{{item.name}}
                </swiper-item>
            </swiper>
            <!-- <view class="text">用户158****2804发布了#书法与绘sdasdasdsds画</view> -->
        </view>
        <view class="header-right">
            <view class="rule" bindtap="toRule">
                <view>活动规则</view>
            </view>
            <view class="rank" bindtap="toRank">
                <view>学校排名</view>
            </view>
        </view>
    </view>
    <!-- <view class="header-none" style="{{styleNone}}"></view> -->
    <view class="vote-search" catchtap="toSearch">
        <image src="../../images/vote-search.png" alt="" />
        <input type="text" placeholder="请输入编号或关键字搜索" placeholder-class="search-ipt" disabled />
        <view class="search-btn">搜索</view>
    </view>
    <view class="vote-body">
        <view class="scroll">
            <view class="classify-img" catchtap="toClassify">
                <image src="/images/classify.png" alt="" />
            </view>
            <scroll-view class="swiper-list" enable-flex scroll-x="true" scroll-into-view="item{{selectedIndex < 3 ? 0 :  selectedIndex - 2}}">
                <block wx:for="{{classifyList}}" wx:key="index">
                    <view class="swiper-item {{selectedIndex==index? 'active' : ''}}" id="item{{index}}" bindtap="changeclassify" data-type="{{item.id}}" data-index="{{index}}">
                        {{item.name}}
                    </view>
                </block>
            </scroll-view>
        </view>
        <block wx:if="{{productionList.length}}">
            <view class="vote-list">
                <block wx:for="{{productionList}}" wx:key="index">
                    <view class="vote-item">
                        <voteCard bind:giveLike="giveLike" voteItem="{{item}}" voteIndex="{{index}}"></voteCard>
                    </view>
                </block>
            </view>
        </block>
        <block wx:else>
            <view class="vote-none">
                <view class="none-con">
                    <image src="/images/vote-none.png" alt="" />
                    <text>暂无作品展示</text>
                </view>
            </view>
        </block>
    </view>
    <view class="vote-footer" >
        <image src="/images/vote-btn.png" alt="" />
        <!-- 活动是否结束 -->
        <view class="footer-left" catchtap="toWinner" wx:if="{{activityFlag}}">
            <image class="winner" src="../../images/vote-winner.png" alt="" />
            <text>查看获奖</text>
        </view>
        <view class="footer-left" catchtap="join" wx:else>
            <image src="../../images/vote-join.png" alt="" />
            <text>我要参赛</text>
        </view>

        <view class="footer-right" catchtap="works">
            <image src="../../images/vote-myproduction.png" alt="" />
            <text>我的作品</text>
        </view>
    </view>
    <!-- 活动弹窗 -->
    <view class="integration" wx:if="{{showJump}}" catchtouchmove="return">
        <view class="dialog">
            <view class="bg" style="background: url('{{jumpUrl.image}}') no-repeat center; background-size: 100% 100%;border-radius:10px" mode="aspectFill" catchtap="jumpPeper"></view>
            <icon type="cancel" size="37" color="white" data-id="0" catchtap="closeJump"></icon>
        </view>
    </view>
</view>
